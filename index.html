<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ananta</title>

    <!-- Foundation -->
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/animations.css" />

    <!-- Widgets -->
    <link rel="stylesheet" href="css/widgets.css" />
    <link rel="stylesheet" href="css/spotlight.css" />
    <link rel="stylesheet" href="css/launchpad.css" />
    <link rel="stylesheet" href="css/bookmarks.css" />
    <link rel="stylesheet" href="css/worldClocks.css" />
    <link rel="stylesheet" href="css/citySearch.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/settings.css" />
  </head>
  <body>
    <!-- ── Dashboard open button (fixed top-left) ─────────────────────── -->
    <button
      id="dashboardOpenBtn"
      aria-label="Dashboard — Pinned Apps"
      title="Dashboard"
    ></button>

    <!-- ── Settings gear button (fixed bottom-right) ────────────────────── -->
    <button
      id="settingsOpenBtn"
      aria-label="Settings"
      title="Settings"
      aria-haspopup="dialog"
      aria-expanded="false"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        aria-hidden="true"
        width="18"
        height="18"
      >
        <path
          fill-rule="evenodd"
          d="M8.34 1.804A1 1 0 019.32 1h1.36a1 1 0 01.98.804l.295 1.473c.497.144.971.342 1.416.587l1.25-.834a1 1 0 011.262.125l.962.962a1 1 0 01.125 1.262l-.834 1.25c.245.445.443.919.587 1.416l1.473.294a1 1 0 01.804.98v1.361a1 1 0 01-.804.98l-1.473.295a6.95 6.95 0 01-.587 1.416l.834 1.25a1 1 0 01-.125 1.262l-.962.962a1 1 0 01-1.262.125l-1.25-.834a6.953 6.953 0 01-1.416.587l-.294 1.473a1 1 0 01-.98.804H9.32a1 1 0 01-.98-.804l-.295-1.473a6.957 6.957 0 01-1.416-.587l-1.25.834a1 1 0 01-1.262-.125l-.962-.962a1 1 0 01-.125-1.262l.834-1.25a6.957 6.957 0 01-.587-1.416l-1.473-.294A1 1 0 011 10.68V9.32a1 1 0 01.804-.98l1.473-.295c.144-.497.342-.971.587-1.416l-.834-1.25a1 1 0 01.125-1.262l.962-.962A1 1 0 014.38 3.03l1.25.834a6.957 6.957 0 011.416-.587l.294-1.473zM13 10a3 3 0 11-6 0 3 3 0 016 0z"
          clip-rule="evenodd"
        />
      </svg>
    </button>

    <!-- ── Settings menu panel ──────────────────────────────────────────── -->
    <div
      id="settingsMenu"
      role="dialog"
      aria-label="Settings"
      aria-modal="true"
      aria-hidden="true"
    >
      <!-- Header -->
      <div class="stg-header">
        <span class="stg-title">Settings</span>
        <button
          id="settingsCloseBtn"
          class="stg-close-btn"
          aria-label="Close settings"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
            width="14"
            height="14"
          >
            <path
              d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"
            />
          </svg>
        </button>
      </div>

      <!-- User info row (shown when logged in) -->
      <div id="stgUserRow" class="stg-user-row" hidden>
        <div class="stg-avatar" aria-hidden="true" id="stgAvatar">A</div>
        <div class="stg-user-info">
          <span class="stg-user-name" id="stgUserName">Ananta User</span>
          <span class="stg-user-email" id="stgUserEmail"></span>
        </div>
      </div>

      <!-- Divider -->
      <div class="stg-divider"></div>

      <!-- Menu items -->
      <ul class="stg-list" role="list">
        <!-- Account Settings — logged-in only -->
        <li class="stg-item stg-auth-only" id="stgAccountItem" hidden>
          <button class="stg-btn" id="stgAccountBtn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
              width="15"
              height="15"
            >
              <path
                d="M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.493a1.23 1.23 0 00.41 1.412A9.957 9.957 0 0010 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 00-13.074.003z"
              />
            </svg>
            Account Settings
            <svg
              class="stg-chevron"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
              width="12"
              height="12"
            >
              <path
                fill-rule="evenodd"
                d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </li>

        <!-- Sync — logged-in only -->
        <li class="stg-item stg-auth-only" id="stgSyncItem" hidden>
          <button class="stg-btn" id="stgSyncBtn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
              width="15"
              height="15"
            >
              <path
                fill-rule="evenodd"
                d="M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0v2.43l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z"
                clip-rule="evenodd"
              />
            </svg>
            Sync
            <span class="stg-badge">Sync</span>
          </button>
        </li>

        <!-- Logout — logged-in only -->
        <li class="stg-item stg-auth-only" id="stgLogoutItem" hidden>
          <button class="stg-btn stg-btn-destructive" id="stgLogoutBtn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
              width="15"
              height="15"
            >
              <path
                fill-rule="evenodd"
                d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z"
                clip-rule="evenodd"
              />
              <path
                fill-rule="evenodd"
                d="M19 10a.75.75 0 00-.75-.75H8.704l1.048-1.068a.75.75 0 10-1.056-1.066l-2.5 2.55a.75.75 0 000 1.066l2.5 2.55a.75.75 0 101.056-1.066L8.704 10.75H18.25A.75.75 0 0019 10z"
                clip-rule="evenodd"
              />
            </svg>
            Log out
          </button>
        </li>

        <!-- Login — logged-out only -->
        <li class="stg-item stg-guest-only" id="stgLoginItem">
          <button class="stg-btn stg-btn-accent" id="stgLoginBtn">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
              width="15"
              height="15"
            >
              <path
                fill-rule="evenodd"
                d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z"
                clip-rule="evenodd"
              />
              <path
                fill-rule="evenodd"
                d="M16.75 10a.75.75 0 00-.75-.75H6.704l1.048-1.068a.75.75 0 10-1.056-1.066l-2.5 2.55a.75.75 0 000 1.066l2.5 2.55a.75.75 0 101.056-1.066L7.704 10.75H16a.75.75 0 00.75-.75z"
                clip-rule="evenodd"
              />
            </svg>
            Log in to Ananta
          </button>
        </li>
      </ul>
    </div>
    <!-- /#settingsMenu -->

    <!-- ══════════════════════════════════════════════════
         DASHBOARD MODAL — Pinned Apps
    ══════════════════════════════════════════════════ -->
    <div
      id="dashboardOverlay"
      aria-hidden="true"
      role="dialog"
      aria-label="Dashboard — Pinned Apps"
      aria-modal="true"
    >
      <!-- Backdrop -->
      <div id="dbBackdrop" class="spring-gpu"></div>

      <!-- Panel -->
      <div id="dashboardPanel" class="spring-gpu" tabindex="-1">
        <!-- Header -->
        <div class="db-panel-header">
          <span class="db-panel-title">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              width="16"
              height="16"
              aria-hidden="true"
            >
              <rect x="2" y="2" width="6" height="6" rx="1.5" />
              <rect x="12" y="2" width="6" height="6" rx="1.5" />
              <rect x="2" y="12" width="6" height="6" rx="1.5" />
              <rect x="12" y="12" width="6" height="6" rx="1.5" />
            </svg>
            Applications
          </span>
          <input
            id="dbSearchInput"
            type="search"
            placeholder="Search apps…"
            autocomplete="off"
            spellcheck="false"
            aria-label="Search apps"
          />
          <div class="db-header-controls">
            <button
              id="dbSettingsBtn"
              aria-label="Settings"
              title="Settings"
            ></button>
            <button id="dbCloseBtn" aria-label="Close Dashboard" title="Close">
              &times;
            </button>
          </div>
        </div>

        <!-- Body: apps grid + add button -->
        <div class="db-panel-body">
          <div id="dashboardGrid" role="list" aria-label="Pinned apps"></div>
        </div>

        <!-- Add App dialog (sheet inside panel) -->
        <div
          id="dbAddDialog"
          aria-hidden="true"
          role="dialog"
          aria-label="Add app"
          aria-modal="true"
        >
          <div class="db-dialog-backdrop"></div>
          <div class="db-dialog-sheet">
            <div class="db-dialog-header">
              <h3 class="db-dialog-title">Add App</h3>
              <button id="dbDialogClose" aria-label="Cancel">&times;</button>
            </div>
            <div class="db-dialog-body">
              <div class="db-field">
                <label class="db-field-label" for="dbDialogUrl">
                  URL <span class="db-required">*</span>
                </label>
                <input
                  id="dbDialogUrl"
                  class="db-input"
                  type="url"
                  placeholder="https://example.com"
                  autocomplete="url"
                  spellcheck="false"
                />
              </div>
              <div class="db-field">
                <label class="db-field-label" for="dbDialogName">
                  Name <span class="db-optional">(optional)</span>
                </label>
                <input
                  id="dbDialogName"
                  class="db-input"
                  type="text"
                  placeholder="Auto-detected from URL"
                  autocomplete="off"
                  spellcheck="false"
                />
              </div>
            </div>
            <div class="db-dialog-actions">
              <button id="dbDialogCancel" class="db-btn db-btn-secondary">
                Cancel
              </button>
              <button id="dbDialogSave" class="db-btn db-btn-primary">
                Save
              </button>
            </div>
          </div>
        </div>
        <!-- /#dbAddDialog -->
      </div>
      <!-- /#dashboardPanel -->
    </div>
    <!-- /#dashboardOverlay -->

    <div id="app">
      <!-- ══════════════════════════════════════════════════
           TOP BAR — Spotlight search (10vh)
      ══════════════════════════════════════════════════ -->
      <header id="topBar" aria-label="Search">
        <!-- ── Brand wordmark (top-left) ────────────────────────────────── -->
        <div class="brand-mark" aria-label="Ananta">
          <span class="brand-name">ANANTA</span>
          <span class="brand-tagline"
            >Made with
            <span class="brand-heart" aria-label="love">&#10084;</span> by
            Kartik Tyagi</span
          >
        </div>

        <!-- Spotlight trigger bar -->
        <div
          id="spotlightBar"
          class="spotlight-bar glass spring-gpu"
          role="button"
          tabindex="0"
          aria-label="Search history, bookmarks and sites · ⌘K"
          aria-haspopup="dialog"
        >
          <svg
            class="spotlight-bar-icon"
            viewBox="0 0 20 20"
            fill="currentColor"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
              clip-rule="evenodd"
            />
          </svg>
          <span class="spotlight-bar-placeholder"
            >Search history, bookmarks and sites…</span
          >
          <kbd class="spotlight-bar-kbd" aria-hidden="true">⌘K</kbd>
        </div>

        <!-- Spotlight overlay (full-screen modal) -->
        <div
          id="spotlightOverlay"
          class="spotlight-overlay"
          aria-hidden="true"
          role="dialog"
          aria-label="Search"
          aria-modal="true"
        >
          <div id="spotlightBackdrop" class="spotlight-backdrop"></div>
          <div id="spotlightPanel" class="spotlight-panel glass spring-gpu">
            <div class="spotlight-input-row">
              <svg
                class="spotlight-icon"
                viewBox="0 0 20 20"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  fill-rule="evenodd"
                  d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                  clip-rule="evenodd"
                />
              </svg>
              <input
                type="search"
                id="spotlightInput"
                class="spotlight-input"
                placeholder="Search history, bookmarks, sites…"
                autocomplete="off"
                spellcheck="false"
                aria-label="Search"
                aria-autocomplete="list"
                aria-controls="spotlightResults"
              />
              <kbd class="spotlight-esc" aria-hidden="true">esc</kbd>
            </div>
            <div
              id="spotlightResults"
              class="spotlight-results"
              role="listbox"
              aria-label="Search results"
            ></div>
          </div>
        </div>
      </header>

      <!-- ══════════════════════════════════════════════════
           BOTTOM AREA — 90vh: left clocks (25%) + right content (75%)
      ══════════════════════════════════════════════════ -->
      <div id="bottomArea">
        <!-- ── LEFT PANEL (25%) — World clocks ───────────────────────────── -->
        <aside id="leftPanel" aria-label="World clocks">
          <!-- Hero clock (local) -->
          <div id="heroTimeline" class="spring-appear-up">
            <div class="hero-card">
              <div class="hero-meta">
                <div class="hero-location">
                  <span id="heroCity" class="hero-city"></span>
                  <span id="heroCountry" class="hero-country"></span>
                </div>
                <span id="heroDate" class="hero-date"></span>
              </div>
              <div
                id="heroTime"
                class="hero-time"
                aria-live="polite"
                aria-label="Current time"
              ></div>
              <div class="hero-footer">
                <span id="heroGreeting" class="hero-greeting"></span>
                <div class="hero-fmt" role="group" aria-label="Time format">
                  <button class="hero-fmt-btn" data-fmt="12">12h</button>
                  <button class="hero-fmt-btn" data-fmt="24">24h</button>
                </div>
              </div>
            </div>
          </div>

          <!-- World clock controls (edit toggle + add city) —
               rendered empty; worldClocks.js populates SVG icons -->
          <div id="wcControls" role="toolbar" aria-label="World clock controls">
            <button
              id="wcAddBtn"
              class="wc-add-btn"
              aria-label="Add city"
              aria-hidden="true"
              tabindex="-1"
            ></button>
            <button
              id="wcGearBtn"
              class="wc-gear-btn"
              aria-label="Edit world clocks"
              title="Edit"
            ></button>
          </div>

          <!-- World clock cards rendered dynamically by worldClocks.js -->
          <div id="worldClocks" aria-label="World time" role="list"></div>
        </aside>

        <!-- ── RIGHT PANEL (75%) — Sites + Bookmarks ─────────────────── -->
        <main id="rightPanel">
          <!-- Favourite Sites — skeleton shown until topsites.js runs -->
          <section id="topSitesArea" aria-labelledby="lp-heading">
            <div class="lp-outer" aria-hidden="true">
              <div class="lp-track">
                <div class="lp-page">
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                  <div class="lp-skeleton-item skeleton"></div>
                </div>
              </div>
            </div>
          </section>

          <!-- Bookmarks (VS Code explorer style) -->
          <section id="bookmarksSection" aria-labelledby="bm-heading">
            <div class="bm-header-row">
              <!-- <h2 id="bm-heading" class="section-label">Bookmarks</h2> -->
              <!-- Folder tabs injected by bookmarks.js -->
              <div
                id="bmFolderTabs"
                class="bm-folder-tabs"
                role="tablist"
                aria-label="Bookmark folders"
              ></div>
            </div>
            <!-- Tree injected by bookmarks.js -->
            <div
              id="bmTree"
              class="bm-tree-container"
              role="tree"
              aria-label="Bookmarks"
            ></div>
          </section>
        </main>
      </div>
      <!-- #bottomArea -->
    </div>
    <!-- #app -->

    <!-- ═══════════════════════════════════════════════════════════════
         SCRIPTS — load order matters (globals chain)
    ═══════════════════════════════════════════════════════════════ -->
    <script src="js/utils.js"></script>
    <script src="js/physics.js"></script>
    <script src="js/icons.js"></script>
    <script src="js/search.js"></script>
    <script src="js/clocks.js"></script>
    <script src="js/worldClockTime.js"></script>
    <script src="js/worldClocks.js"></script>
    <script src="js/tzlookup.js"></script>
    <script src="js/citySearch.js"></script>
    <script src="js/worldClockModal.js"></script>
    <script src="js/spotlight.js"></script>
    <script src="js/topsites.js"></script>
    <script src="js/bookmarks.js"></script>
    <script src="js/storage/appsStorage.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
